<!DOCTYPE html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="../static/css/style.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.js"></script>
    <script src="https://kit.fontawesome.com/c1651245ed.js" crossorigin="anonymous"></script>
    <script src="../static/js/logout.js"></script>
    <title>메인페이지</title>
    <style>
        .artist-main-info {
            /*background-image: linear-gradient(0deg, rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url('https://movie-phinf.pstatic.net/20210715_95/1626338192428gTnJl_JPEG/movie_image.jpg');*/

            width: 1200px;
            height: 1500px;
            color: white;

            margin: 0 auto;
            margin-top: 30px;

            background-size: cover;
            background-position: center;
            padding-top: 40px;
        }
        .mypage{
            background-color: dodgerblue;

            width: 340px;
            height: 100px;
            color: white;

            font-size: 50px;

            border-radius:10px;
            /*border : 5px solid red;*/

            margin: 30px auto auto 50px;

            background-size: cover;
            background-position: center;
            display: block;

            padding:10px 0px 0px 30px;
        }

        .card-img-top{
            width: 80px;
            height: 80px;
        }

        .mylike{
            width:1100px;

            font-size: 30px;

            margin:30px auto auto auto;
        }

        .main_button{
            width:120px;

            margin:20px 0px 0px 950px;
        }

        .test {
            display: flex;
        }

        .album {
            width: 100px;
            height: 100px;
            background-color: lightgray;
            margin: 10px;
            font-size: 30px;
        }

        .album.special {
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            background-color: red;
        }

        .album span{
            font-size: 30px;
        }
    </style>
    <script>
<!--    메인으로 돌아가는 기능    -->
        function to_main(){
            window.location.href="/"
        }

        // 노래 상세페이지로 이동
        function to_detail(){
            window.location.href="/music/${musicId}"
        }

        $(document).ready(function () {
            get_list()
        })

        // 붙이기 코드
        function get_list() {
            // 창이 켜지면 송리스트 초기화
            $('#song-list').empty();
            $.ajax({
                type: "GET",
                url: "/playlist",
                data: {},
                success: function (response) {
                    //플레이리스트로 받아온 정보들을 플리로 저장할게요
                    let pli = response['playlist'];
                    for (let i=0; i<50; i++){
                        //플리의 i 번째 정보에서 title,singer,album,cover 뽑을거에요
                        // let id=pli[i]['id']
                        let title=pli[i]['title'];
                        let singer=pli[i]['singer'];
                        let album=pli[i]['album'];
                        let cover=pli[i]['cover'];
                        let rank=pli[i]['rank'];

                        // let star_image='⭐'.repeat(star)
                        // 뽑아낸 정보들을 밑의 형식으로 붙일거에요
                        {#let temp_html=`<tr onclick="to_song">#}
                        {#                        <td>${rank}</td>#}
                        {#                        <td><img src="${cover}" class="card-img-top" alt="..."></td>#}
                        {#                        <td>${title}</td>#}
                        {#                        <td>${singer}</td>#}
                        {#                        <td>${album}</td>#}
                        {#                </tr>`#}

                        let temp_html=`<div class="container">
                                            <div class="box">
                                                <div class="imgBox">
                                                    <img src="${cover}" alt="">
                                                </div>
                                                <div class="content">
                                                    <h2>${title}</br>
                                                    <span>${singer}/${album}</span></h2>
                                                </div>
                                            </div>
                                       </div>`

                        $('#song-list').append(temp_html);
                    }
                }
            })
        }
    </script>
</head>
<body>
    <header>
        <div class="logo">
            <a href="/"><i class="fa-brands fa-spotify fa-3x"></i></a>
        </div>
        <nav class="nav-bar">
            <ul class="nav__item">
                {% set token = token %}
                {% if token %}
                    <a href="/">
                        <li class="nav__list">메인페이지</li>
                    </a>
                    <a>
                        <li id="logout" onclick="logout()" class="nav__list">로그아웃</li>
                    </a>
                {% else %}
                    <a href="/">
                        <li class="nav__list">메인페이지</li>
                    </a>
                    <a href="/loginForm">
                        <li class="nav__list">로그인</li>
                    </a>
                {% endif %}
            </ul>
        </nav>
    </header>
<!--  마이페이지 제일 큰 틀  -->
    <div class="artist-main-info">
        <h1 style="font-size: 40px; color: red">{{ id }}님의 플레이리스트</h1>
        <div class="test">
            <div class="album">1번</div>
            <div class="album">2번</div>
            <div class="album special">
                <span>앨범명</span>
                <span>곡 제목</span>
                <span>가수명</span>
            </div>
            <div class="album">3번</div>
            <div class="album">4번</div>
        </div>


        <div class="mylike" >
<!--            밑에 내가 추가한 노래 목록-->
            <table class="table"  >
                <thead>
                <tr>
                    <th scope="col">NO.</th>
                    <th scope="col">커버</th>
                    <th scope="col">제목</th>
                    <th scope="col">아티스트</th>
                    <th scope="col">앨범명</th>
<!--                    <th scope="col">⭐</th>-->
                </tr>
                </thead>
                <tbody id="song-list">

                </tbody>
            </table>
            <p></p>
        </div>
    </div>
</body>
</html>